---
title: "[ì˜¤ë¸Œì íŠ¸] ì ˆì°¨ì ì¸ ì„¤ê³„ ê°œì„ í•˜ê¸°"
tags:
  - ìë°”
image: ./assets/banner.png
date: 2025-06-11 18:05:27
series: ì˜¤ë¸Œì íŠ¸
draft: false
---

![ë°°ë„ˆ ì´ë¯¸ì§€](./assets/banner.png)

> í•´ë‹¹ ë¸”ë¡œê·¸ ê¸€ì€ [ì¡°ì˜í˜¸ë‹˜ì˜ ì¸í”„ëŸ° ê°•ì˜](https://inf.run/eUUx4)ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì“°ì—¬ì§„ ê¸€ì…ë‹ˆë‹¤.

## ì ˆì°¨ì ì¸ ì„¤ê³„

ì´ì œ ì´ì „ì— ë°°ìš´ ì˜í™” ì‹œìŠ¤í…œ ë„ë©”ì¸ ì§€ì‹ìœ¼ë¡œ ì ˆì°¨ì ì¸ ì„¤ê³„ë¥¼ ì§„í–‰í•´ë³´ë„ë¡ í•˜ê² ë‹¤. ì ˆì°¨ì§€í–¥ì ì¸ ì„¤ê³„ ë°©ì‹ì—ëŠ” í¬ê²Œ 2ê°€ì§€ ê°œë…ì´ ì¡´ì¬í•œë‹¤. ë°”ë¡œ **ë°ì´í„°**ì™€ **í”„ë¡œì„¸ìŠ¤**ì´ë‹¤. ë°ì´í„°ëŠ” ë„ë©”ì¸ì— ëŒ€í•œ ìƒíƒœë¥¼ í‘œí˜„í•˜ë©°, í”„ë¡œì„¸ìŠ¤ëŠ” ë„ë©”ì¸ì— í–‰ìœ„ì— ëŒ€í•´ ê¸°ìˆ í•œë‹¤. ë³´í†µ ì ˆì°¨ì§€í–¥ì  ìŠ¤íƒ€ì¼ì€ ë°ì´í„°ì™€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‘ì„±í• ë•Œ ë°ì´í„°ë¶€í„° ìš°ì„ ìˆœìœ„ë¥¼ ë‘ê³  ì‘ì„±ì„ ì§„í–‰í•œë‹¤.

ë³´í†µ ì‹¤ë¬´ì—ì„œ ë°ì´í„°ë¼ëŠ” ê²ƒì€ ê°ì²´ ì•ˆì— í‘œí˜„ì„ í•œë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ê°ì²´ì™€ ì™¸ë¶€ DBì˜ í…Œì´ë¸”ê³¼ ë§¤í•‘ê´€ê³„ë¥¼ ì´ë£¨ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. ê·¸ë¦¬ê³  ë°ì´í„°ë¼ëŠ” ê²ƒì„ ê°ì²´ë¡œ í‘œí˜„í•  ë•Œ ë°ì´í„°ë“¤ì„ ê°ì²´ì˜ ë©¤ë²„ ë³€ìˆ˜ë¡œ ë‘ê³  ìº¡ìŠí™”ë¥¼ ìœ„í•´ ì ‘ê·¼ ì œì–´ìë¥¼ `private`ìœ¼ë¡œ ë‘ê³¤ í•œë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ë©¤ë²„ ë³€ìˆ˜ë¥¼ ì ‘ê·¼í•˜ê±°ë‚˜ ë³€ê²½ì´ í•„ìš”í•  ê²½ìš°ë„ ìˆê¸°ì— `getter`ë‚˜ `setter`ì™€ ê°™ì€ `public method`ë¥¼ ì œê³µí•˜ê¸° ë§ˆë ¨ì´ë‹¤. ê·¸ëŸ¼ ë…ìë“¤ì€ ì´ëŸ° ìƒê°ì´ ë“¤ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

> ğŸ™‹ğŸ» ì§ˆë¬¸
>
> ê°ì²´ë¡œ ë­”ê°€ë¥¼ í•˜ë‹ˆê¹Œ ì´ê±´ ì ˆì°¨ì§€í–¥ì ì´ ì•„ë‹ˆë¼ ê°ì²´ì§€í–¥ì ì´ì§€ ì•Šì„ê¹Œ? 

í•„ìë„ ì²˜ìŒì—ëŠ” ê·¸ë ‡ê²Œ ìƒê°ì„ í–ˆì§€ë§Œ ê°ì²´ì§€í–¥ì ì¸ ê²ƒì€ ë‹¨ìˆœíˆ ê°ì²´ë¥¼ ì‚¬ìš©í•œë‹¤ê³  ê°ì²´ì§€í–¥ì ì¸ ì„¤ê³„ê°€ ì•„ë‹ˆë‹¤. í•´ë‹¹ ë¶€ë¶„ì€ ì¶”í›„ì— ìì„¸íˆ ë§í•´ë³´ë„ë¡ í•˜ê² ë‹¤.

ë‹¤ìŒì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‚´í´ë³´ì. í”„ë¡œì„¸ìŠ¤ì˜ í•µì‹¬ ê°œë…ì€ ë°”ë¡œ **ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ê²ƒì¸ê°€**ì´ë‹¤. ì ˆì°¨ì ì¸ ì„¤ê³„ ê´€ì ì—ì„œ í”„ë¡œì„¸ìŠ¤ëŠ” ë¡œì§ì„ ì‹¤í–‰ ìˆœì„œëŒ€ë¡œ í´ë˜ìŠ¤ì— ë°°ì¹˜í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ìš°ë¦¬ì˜ ì˜í™” ë„ë©”ì¸ì„ ìƒê°í–ˆì„ ë•Œ ì˜ˆë§¤ë¼ëŠ” ê²ƒì„ ìƒê°í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì´ë£¨ì–´ì§ˆ ê²ƒì´ë‹¤.

- DBë¡œë¶€í„° ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ë¡œ ë¶ˆëŸ¬ì˜¨ë‹¤.
- í• ì¸ ì¡°ê±´ì„ í†µí•˜ì—¬ í• ì¸ì´ ê°€ëŠ¥í•œì§€ íŒë‹¨í•œë‹¤.
- í• ì¸ì´ ê°€ëŠ¥í•˜ë©´ í• ì¸ ì •ì±…ì— ë”°ë¼ ê³„ì‚°ì„ ì§„í–‰í•˜ê³  ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ ì •ê°€ë¡œ ê³„ì‚°ì„ í•œë‹¤.
- ìƒì„±ëœ ì˜ˆì•½ ì •ë³´ë¥¼ DBì— ì €ì¥í›„, ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤€ë‹¤.

ì´ëŸ° ì ˆì°¨ëŒ€ë¡œ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì„œ ìš°ë¦¬ëŠ” êµ¬í˜„ì„ í•˜ë©´ ë  ê²ƒì´ë‹¤. ê·¸ëŸ°ë° ì²«ë²ˆì§¸ ê³¼ì •ì˜ DBë¡œë¶€í„° ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” í–‰ìœ„ë¥¼ ë³´í†µ ì–´ë–¤ ê°ì²´ê°€ ë§¡ì•„ì„œ ì§„í–‰ì„ í•˜ê³¤ í•œë‹¤. ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì¼ ê²½ìš° `repository`ê°€ ì§„í–‰ì„ í•˜ê±°ë‚˜ `Data Access Object(DAO)`ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ì‹¤ì œ ìš°ë¦¬ê°€ ì •ì˜í•œ ë°ì´í„° í´ë˜ìŠ¤ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì‘ì—…ì„ ë§¡ëŠ”ë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ DAOë¥¼ ì‹¤ì œ ë¡œì§ì„ ì‘ì„±í•˜ëŠ” í´ë˜ìŠ¤(ex. service í´ë˜ìŠ¤)ì— ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë³€ìˆ˜ë¡œ í¬í•¨ì‹œì¼œë‘ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.

ê·¸ëŸ¼ ìœ„ì— ì˜ˆì‹œë¥¼ ë“  ì˜ˆë§¤ì— ëŒ€í•œ ì„¤ê³„ ì½”ë“œë¥¼ ë³´ë©´ì„œ ì„¤ê³„ë¥¼ ë§ˆë¬´ë¦¬í•´ë³´ì.

``` java
public Reservation reserveScreening(Long customerId, Long screeningId, Integer audienceCount) {
  // DBë¡œë¶€í„° Movie, Screening, DiscountPolicy, DiscountCondition ì¡°íšŒ
  // Screeningì— ì ìš©í•  ìˆ˜ ìˆëŠ” DiscountConditionì´ ìˆëŠ”ì§€ íŒë‹¨
  // DiscountConditionì— ë”°ë¼ ê¸ˆì•¡ ê³„ì‚°
  // Reservation ìƒì„± í›„ DBì— ì €ì¥ ë° ë°˜í™˜
}
```

ë¨¼ì € ì˜ˆì•½ì€ ê³ ê°Id, ìƒì˜ì •ë³´Id, ìƒì˜ í•  ê³ ê° ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ëŠ” ë©”ì„œë“œë¥¼ ì„¤ê³„ë¥¼ í•˜ì˜€ë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ì•ˆì— ì£¼ì„ìœ¼ë¡œ ì ˆì°¨ì ì¸ ìˆœì„œë¥¼ ì‘ì„±í•´ë‚˜ê°”ë‹¤.

> ì‹¤ë¬´ì—ì„œë„ ì£¼ë‹ˆì–´ ê°œë°œìë¼ë©´ ë¨¼ì € ì´ë ‡ê²Œ ì£¼ì„ìœ¼ë¡œ ì‘ì„± í›„, í•˜ë‚˜í•˜ë‚˜ ì„¤ê³„ë¥¼ í•´ë‚˜ê°€ëŠ” ê²ƒì´ ì¢‹ì€ ë°©ë²•ì´ë¼ê³  ìƒê°ì´ ë“ ë‹¤.

ë¨¼ì € DAOë¥¼ í†µí•´ ì™¸ë¶€ DBì˜ ë°ì´í„°ì™€ ë§¤í•‘ëœ ë°ì´í„° í´ë˜ìŠ¤ë¥¼ ì–»ì–´ì˜¨ë‹¤. ê·¸ í›„ì— `DiscountCondition`ì„ ë£¨í”„ë¥¼ ëŒì•„ì„œ ê¸°ê°„ ì¡°ê±´ì¸ì§€ ìˆœì„œ ì¡°ê±´ì¸ì§€ íŒë‹¨ì„ í•œ í›„ì— `DiscountCondition`ì„ ë°˜í™˜ì‹œí‚¨ë‹¤. ì•„ë¬´ëŸ° ì¡°ê±´ì´ ì—†ë‹¤ë©´ nullì„ ë°˜í™˜ì‹œí‚¤ê²Œë” í•´ë³´ì. ë‹¤ìŒìœ¼ë¡œ ë°˜í™˜ëœ `DiscountCondiotion`ì´ `null`ì¸ì§€ ì²´í¬ë¥¼ í•˜ì—¬ ê¸ˆì•¡ì„ ê³„ì‚° í›„ `Reservation`ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ DBì— ì €ì¥í•˜ê³  ë°˜í™˜ì‹œí‚¤ëŠ” ë¡œì§ì´ë‹¤.

ì´ëŸ° ì ˆì°¨ì ì¸ ì„¤ê³„ ë°©ì‹ì˜ í•µì‹¬ì€ ë°ì´í„°ê°€ ì‚¬ìš© ë  ë¬¸ë§¥ì„ ì „í˜€ ê³ ë ¤í•˜ì§€ ì•Šì€ ì±„ ë…ë¦½ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì„¤ê³„í–ˆë‹¤ëŠ” ê²ƒì´ë‹¤. ë˜í•œ, ë°ì´í„°ê°€ ì™„ì„ ë˜ë©´ ì™¸ë¶€ì˜ í”„ë¡œì„¸ìŠ¤ì— ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¡œì§ì„ êµ¬í˜„í•œë‹¤. ì´ëŸ° ë°©ì‹ì€ ê²°êµ­ `Service` í´ë˜ìŠ¤ì— í”„ë¡œì„¸ìŠ¤ê°€ ë‚˜ì—´ ë  ê²ƒì´ê³  í•˜ë‚˜ì˜ `Service` í´ë˜ìŠ¤ê°€ ë°ì´í„° í´ë˜ìŠ¤ì™€ DAOë¥¼ ì „ë¶€ ì œì–´í•˜ëŠ” **ì¤‘ì•™ ì§‘ì¤‘ì‹ ì œì–´** ìŠ¤íƒ€ì¼ì´ë¼ëŠ” ì ì´ë‹¤. ì´ëŸ° ì ì€ ë‚˜ì¤‘ì— ìš°ë¦¬ê°€ ìœ ì§€ë³´ìˆ˜ë¥¼ í•  ë•Œ ì—„ì²­ ê³ ìƒì„ í•  ê²ƒì´ë‹¤.

## ì˜ˆì œ. ì ˆì°¨ì ì¸ ì„¤ê³„

ê·¸ëŸ¬ë©´ ì˜ˆì œ ì½”ë“œë¥¼ ì‚´í´ë³´ì. ì˜ˆì œ ì½”ë“œëŠ” ì—¬ê¸°ì„œ ì½”ë“œë¥¼ ì§ì ‘ì ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ë³´ë‹¤ëŠ” [ê°•ì‚¬ë‹˜ì˜ ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œ](https://github.com/eternity-oop/object-basic-02-01)ë¥¼ ë§í¬ë¡œ ë‚¨ê²¨ë‘ê² ë‹¤. ë³¸ì¸ì´ ì§ì ‘ í•œë²ˆ ì‘ì„±í•´ë³´ê³  ë¹„êµí•´ë³´ì! í•„ìëŠ” ì§ì ‘ í•œë²ˆ êµ¬í˜„ í›„ ë¹„êµë¥¼ í•´ë³´ì•˜ë‹¤.

## ë³€ê²½ê³¼ ì˜ì¡´ì„±

ìš°ë¦¬ëŠ” ì§€ê¸ˆê¹Œì§€ í•´ì„œ ì ˆì°¨ì ì¸ ì„¤ê³„ ë°©ì‹ìœ¼ë¡œ ì„¤ê³„ë¥¼ ì§„í–‰í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ ì´ëŸ° ì ˆì°¨ì ì¸ ì„¤ê³„ ë°©ì‹ì—ëŠ” ë¬¸ì œê°€ ì¡´ì¬í•˜ì˜€ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í• ì¸ ì¡°ê±´ì´ ë³€ê²½ë˜ëŠ” ê²ƒê³¼ ê°™ì€ ìš”êµ¬ì‚¬í•­ì´ ì˜¨ë‹¤ê±°ë‚˜, ì¡°ê¸ˆ ë” ê¹”ë”í•œ ì½”ë“œì˜ ì‘ì„±ì„ ìœ„í•œ ë¦¬íŒ©í† ë§ ê³¼ì •ì„ í†µí•´ ë³€ê²½í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `DiscountCondition`ì— ìƒˆë¡œìš´ ì¡°ê±´ì¸ ìˆœì„œ ì¡°ê±´ê³¼ ì‹œê°„ ì¡°ê±´ì„ ì¡°í•©í•œ ì¡°ê±´ì´ ì¶”ê°€ë˜ì–´ì•¼ í•œë‹¤ê³  ë³´ì. ê·¸ëŸ¬ë©´ ì•„ë§ˆ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ì´ ë  ê²ƒì´ë‹¤.

``` java
package me.sungbin.reservation.domain;

import java.time.DayOfWeek;
import java.time.LocalTime;

public class DiscountCondition {

    public enum ConditionType {
        PERIOD_CONDITION,
        SEQUENCE_CONDITION,
        COMBINED_CONDITION
    }

    private Long id;

    private Long policyId;

    private ConditionType conditionType;

    private DayOfWeek dayOfWeek;

    private LocalTime startTime;

    private LocalTime endTime;

    private Integer sequence;

    public DiscountCondition() {
    }

    public DiscountCondition(Long policyId, ConditionType conditionType, DayOfWeek dayOfWeek, LocalTime startTime, LocalTime endTime, Integer sequence) {
        this(null, policyId, conditionType, dayOfWeek, startTime, endTime, sequence);
    }

    public DiscountCondition(Long id, Long policyId, ConditionType conditionType, DayOfWeek dayOfWeek, LocalTime startTime, LocalTime endTime, Integer sequence) {
        this.id = id;
        this.policyId = policyId;
        this.conditionType = conditionType;
        this.dayOfWeek = dayOfWeek;
        this.startTime = startTime;
        this.endTime = endTime;
        this.sequence = sequence;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Long getPolicyId() {
        return policyId;
    }

    public void setPolicyId(Long policyId) {
        this.policyId = policyId;
    }

    public boolean isPeriodCondition() {
        return ConditionType.PERIOD_CONDITION.equals(conditionType);
    }

    public boolean isSequenceCondition() {
        return ConditionType.SEQUENCE_CONDITION.equals(conditionType);
    }

    public ConditionType getConditionType() {
        return conditionType;
    }

    public void setConditionType(ConditionType conditionType) {
        this.conditionType = conditionType;
    }

    public DayOfWeek getDayOfWeek() {
        return dayOfWeek;
    }

    public void setDayOfWeek(DayOfWeek dayOfWeek) {
        this.dayOfWeek = dayOfWeek;
    }

    public LocalTime getStartTime() {
        return startTime;
    }

    public void setStartTime(LocalTime startTime) {
        this.startTime = startTime;
    }

    public LocalTime getEndTime() {
        return endTime;
    }

    public void setEndTime(LocalTime endTime) {
        this.endTime = endTime;
    }

    public Integer getSequence() {
        return sequence;
    }

    public void setSequence(Integer sequence) {
        this.sequence = sequence;
    }
}
```

ì´ì— ë”°ë¼ ì•„ë˜ì˜ `ReservationService` í´ë˜ìŠ¤ë„ ë³€ê²½ì´ ìƒê¸¸ ê²ƒì´ë‹¤. ì™œëƒí•˜ë©´ ì¡°ê±´ì„ ìˆœíšŒí•  ë•Œ ì¡°í•© ì¡°ê±´ì´ ìƒê¹€ìœ¼ë¡œ ì¡°ê±´ë¬¸ì„ ì¶”ê°€í•´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

``` java
package me.sungbin.reservation.service;

import me.sungbin.generic.Money;
import me.sungbin.reservation.domain.*;
import me.sungbin.reservation.persistence.*;

import java.util.List;

public class ReservationService {

    private ScreeningDAO screeningDAO;

    private MovieDAO movieDAO;

    private DiscountPolicyDAO discountPolicyDAO;

    private DiscountConditionDAO discountConditionDAO;

    private ReservationDAO reservationDAO;

    public ReservationService(ScreeningDAO screeningDAO, MovieDAO movieDAO, DiscountPolicyDAO discountPolicyDAO,
                              DiscountConditionDAO discountConditionDAO, ReservationDAO reservationDAO) {
        this.screeningDAO = screeningDAO;
        this.movieDAO = movieDAO;
        this.discountConditionDAO = discountConditionDAO;
        this.discountPolicyDAO = discountPolicyDAO;
        this.reservationDAO = reservationDAO;
    }

    public Reservation reserveScreening(Long customerId, Long screeningId, Integer audienceCount) {
        Screening screening = screeningDAO.selectScreening(screeningId);
        Movie movie = movieDAO.selectMovie(screening.getMovieId());
        DiscountPolicy policy = discountPolicyDAO.selectDiscountPolicy(movie.getId());
        List<DiscountCondition> conditions = discountConditionDAO.selectDiscountConditions(policy.getId());
        DiscountCondition condition = findDiscountCondition(screening, conditions);
        Money fee;

        if (condition != null) {
            fee = movie.getFee().minus(calculateDiscount(policy, movie));
        } else {
            fee = movie.getFee();
        }

        Reservation reservation = makeReservation(customerId, screeningId, audienceCount, fee);
        reservationDAO.insert(reservation);

        return reservation;
    }

    private DiscountCondition findDiscountCondition(Screening screening, List<DiscountCondition> conditions) {
        for (DiscountCondition condition : conditions) {
            if (condition.isPeriodCondition()) {
                if (screening.isPlayedIn(condition.getDayOfWeek(),
                        condition.getStartTime(),
                        condition.getEndTime())) {
                    return condition;
                }
            } else { // ìƒˆë¡œìš´ ì¡°ê±´ ì¶”ê°€ í•„ìš”
                if (condition.getSequence().equals(screening.getSequence())) {
                    return condition;
                }
            }
        }

        return null;
    }

    private Money calculateDiscount(DiscountPolicy policy, Movie movie) {
        if (policy.isAmountPolicy()) {
            return policy.getAmount();
        } else if (policy.isPercentPolicy()) {
            return movie.getFee().times(policy.getPercent());
        }

        return Money.ZERO;
    }

    private Reservation makeReservation(Long customerId, Long screeningId, Integer audienceCount, Money fee) {
        return new Reservation(customerId, screeningId, audienceCount, fee.times(audienceCount));
    }
}
```

ì§€ê¸ˆì²˜ëŸ¼ ë°ì´í„° í´ë˜ìŠ¤ê°€ ë³€ê²½ë¨ì— ë”°ë¼ í”„ë¡œì„¸ìŠ¤ë„ í•¨ê»˜ ë³€ê²½ë˜ëŠ” ë¬¸ì œê°€ ì¡´ì¬í•œë‹¤. ì´ê²ƒì„ ë‹¤ë¥¸ ë§ë¡œ í•˜ë©´ **ì˜ì¡´ì„±**ì´ ì¡´ì¬í•œë‹¤ë¼ê³  ë§í•  ìˆ˜ ìˆë‹¤. ì¦‰, `ReservationService`ê°€ `DiscountCondition`ë¥¼ ì˜ì¡´í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, ì‰½ê²Œ ë” ë§í•˜ë©´ `DiscountCondition` ë³€ê²½ì´ `ReservationService`ì— ì „íŒŒëœë‹¤ë¼ê³ ë„ ë³¼ ìˆ˜ ìˆë‹¤.

> ğŸ“š ìš©ì–´ì •ë¦¬
>
> ì˜ì¡´ì„±: ë‹¤ë¥¸ ì½”ë“œê°€ ìˆ˜ì •ë  ë•Œ í•¨ê»˜ ìˆ˜ì • ë  **ê°€ëŠ¥ì„±**
>
> ì˜ì¡´ì„±ì€ ë³€ê²½ ë°©í–¥ì— ë°˜ëŒ€ì´ë‹¤.

ê·¸ëŸ¬ë©´ ìš°ë¦¬ëŠ” ì–´ë–¤ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ëŠ”ì§€ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œ? ë°”ë¡œ ì½”ë“œë¥¼ ë´¤ì„ ë•Œ í•´ë‹¹ í´ë˜ìŠ¤ ì™¸ì˜ ì™¸ë¶€ í´ë˜ìŠ¤ê°€ ë³´ì´ë©´ í•´ë‹¹ í´ë˜ìŠ¤ëŠ” ê·¸ ì™¸ë¶€ í´ë˜ìŠ¤ì— ì˜ì¡´í•œë‹¤ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

ì˜ì¡´ì„± ì¸¡ë©´ì—ì„œ ì ˆì°¨ì ì¸ ì„¤ê³„ê°€ ì™œ ë³€ê²½ì— ë¯¼ê°í• ê¹Œ? ë°”ë¡œ ë°ì´í„°ì™€ í”„ë¡œì„¸ìŠ¤ê°€ ë¶„ë¦¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ë˜í•œ ìš°ë¦¬ê°€ ì‘ì„±í•œ `DiscountCondition`ê³¼ ê°™ì€ ë°ì´í„° í´ë˜ìŠ¤ë¥¼ ì˜ ë³´ë©´ `private`ìœ¼ë¡œ ì™¸ë¶€ì— ì ‘ê·¼ ëª»í•˜ê²Œ ìº¡ìŠí™”ë¥¼ í•´ë‘ì—ˆì§€ë§Œ ë‹¨ìˆœíˆ `getter/setter`ë¥¼ ì—´ì–´ë‘ ìœ¼ë¡œ ë³€ê²½ ë° ì¡°íšŒë¥¼ ëˆ„êµ¬ë‚˜ ì•„ë¬´ë•Œë‚˜ í•  ìˆ˜ ìˆë‹¤. ì¦‰, ì´ê²ƒì€ ìº¡ìŠí™” ì›ì¹™ì— ì§€í‚¤ì§€ ëª»í•œ ê²ƒì´ë‹¤. ì¦‰, ê°ì²´ê°€ ì‚¬ìš© ë  ë¬¸ë§¥ì„ ì „í˜€ ê³ ë ¤í•˜ì§€ ì•Šê³  ì„¤ê³„ë¥¼ í•œ ê²ƒì´ë‹¤.

ì´ëŸ° íŒŒê¸‰íš¨ê³¼ë¡œ ì¸í•˜ì—¬ ë°ì´í„°ê°€ ë³€ê²½ë  ë•Œ í•¨ê»˜ ìˆ˜ì •í•´ì•¼ í•  ë¶€ë¶„ì„ ì˜ˆì¸¡í•˜ê¸° ì–´ë µë‹¤. ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ê·¼ë³¸ì ì¸ ë°©ë²•ì€ í”„ë¡œì„¸ìŠ¤ê°€ ë°ì´í„°ì˜ ë‚´ë¶€ êµ¬ì¡°ì— ì˜ì¡´í•˜ê³  ìˆìœ¼ë©´ ëœë‹¤. ì¦‰, ì™¸ë¶€ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°ì²´ ì•ˆìœ¼ë¡œ í¬í•¨ì‹œí‚¤ë©´ ëœë‹¤. ì´ê²ƒì´ ê°ì²´ì§€í–¥ì˜ ì¶œë°œì ì´ë‹¤.

## ë°ì´í„°ì™€ í”„ë¡œì„¸ìŠ¤ í†µí•©í•˜ê¸°

ê·¸ëŸ¬ë©´ ë°ì´í„°ì™€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì–´ë–»ê²Œ í†µí•©í• ê¹Œ? ì´ëŸ° ë¦¬íŒ©í† ë§ í•¨ì— ìˆì–´ì„œ ì—„ì²­ ì¤‘ìš”í•œ ê·œì¹™ì´ ì¡´ì¬í•œë‹¤. ë°”ë¡œ **ë°ì´í„°ì˜ getterë¥¼ ì‚¬ìš©í•´ì„œ íŒë‹¨í•˜ê³  ê²°ì •í•˜ëŠ” ë¡œì§ì´ ìˆë‹¤ë©´ ê·¸ê²ƒì„ ê·¸ëŒ€ë¡œ ë°ì´í„°ì— ë‘¬ë¼**ë¼ëŠ” ê²ƒì´ë‹¤. ì¦‰, ì‰½ê²Œ ìƒê°í•´ì„œ getter ë©”ì„œë“œê°€ ì™¸ë¶€ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©ë˜ê³  ìˆë‹¤ë©´ í•´ë‹¹ ë¶€ë¶„ ë¡œì§ì„ ê°ì²´ ì•ˆìœ¼ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆëŠ”ì§€ íŒë‹¨í•´ë³´ë¼ëŠ” ê²ƒì´ë‹¤. ì´ê²ƒì„ ì „ë¬¸ìš©ì–´ë¡œ **ê°ì²´ ì±…ì„ì˜ ì´ë™**ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

> ğŸ“š ìš©ì–´ì •ë¦¬
>
> ì±…ì„: ë°ì´í„°ë¥¼ ì´ìš©í•´ì„œ ì˜ì‚¬ ê²°ì •ì„ í•˜ê±°ë‚˜ ë°ì´í„°ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§

ì´ë ‡ê²Œ í•¨ìœ¼ë¡œ ìº¡ìŠí™”ë„ ì˜ ì§€ì¼œì§€ê³  ì§„ì •í•œ ê°ì²´ê°€ ëœ ë“¯ ë³´ì¸ë‹¤. í•˜ì§€ë§Œ ì—¬ì „íˆ ì‚´í´ë³´ë©´ `ReservationService`ëŠ” `DiscountPolicy`, `DiscountCondition`ê°™ì€ ë°ì´í„° í´ë˜ìŠ¤ë¥¼ ê³„ì† ì˜ì¡´í•˜ê³  ìˆëŠ” í˜•íƒœì´ë‹¤. ì´ëŸ° ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ? í•´ê²°ë²•ì€ ë„ë©”ì¸ êµ¬ì¡°ë¥¼ ì´ìš©í•˜ì—¬ **ì˜ì¡´ì„±ì„ ì œì–´**í•˜ëŠ” ê²ƒì´ë‹¤.

ê°ì²´ì§€í–¥ì—ì„œ ìš°ë¦¬ëŠ” ê°ì²´ë¥¼ ë‹¨ìˆœíˆ í´ë˜ìŠ¤ë¡œë§Œ ë§Œë“¤ì—ˆë‹¤ê³  ê°ì²´ì§€í–¥ì´ë¼ê³  í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ í´ë˜ìŠ¤ê°€ ë°ì´í„°ë¥¼ ì™¸ë¶€ì—ì„œ ì œê³µë°›ê³  íŒë‹¨ ë¡œì§ë„ ì™¸ë¶€ì— ìˆëŠ”ê²ƒê³¼ ê°™ì€ ìˆ˜ë™ì ì¸ ì¡´ì¬ë¼ë©´ ê°ì²´ì§€í–¥ ê´€ì ì—ì„œ ì´ê²ƒì„ ë°ì´í„°ë¼ê³  ë¶€ë¥´ê³  ìê¸° ìì‹ ì˜ ìƒíƒœë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ê³  ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ëŠ¥ë™ì ì¸ ì¡´ì¬ë¼ë©´ ì´ê²ƒì„ ë¹„ë¡œì†Œ ê°ì²´ë¼ê³  ë¶€ë¥¸ë‹¤.

## ì ˆì°¨ì—ì„œ ê°ì²´ë¡œ

ê·¸ëŸ¬ë©´ ë„ë©”ì¸ êµ¬ì¡°ë¥¼ í†µí•˜ì—¬ ì˜ì¡´ì„± ì œì–´ë¥¼ ì–´ë–»ê²Œ í• ê¹Œ? ì˜ ìƒê°í•´ë³´ë©´ ì²« ë„ë©”ì¸ ê°œë…ì„ ì•Œì•„ê°ˆë•Œ ì„¤ê³„í–ˆë˜ ì„¤ê³„ë„ê°€ í° ë„ì›€ì„ ì¤„ ê²ƒì´ë‹¤.

![image1](./assets/01.png)

ìœ„ì˜ ê·¸ë¦¼ì„ ë³´ë©´ í• ì¸ ì •ì±…ì€ ì—¬ëŸ¬ í• ì¸ ì¡°ê±´ì„ ê°€ì§€ëŠ” 1:n ê´€ê³„ê°€ ì„±ë¦½ëœë‹¤. ì´ê²ƒì„ ê·¸ëŒ€ë¡œ ì½”ë“œë¡œ ì˜®ê¸°ëŠ” ê³¼ì •ì´ ë°”ë¡œ ë„ë©”ì¸ êµ¬ì¡°ë¥¼ í†µí•œ ì˜ì¡´ì„± ì œì–´ ë°©ë²•ì´ë‹¤. ìœ„ì™€ ê°™ì´ ë³€ê²½ì„ í•œë‹¤ë©´ ìµœì¢…ì ìœ¼ë¡œ `ReservationService`ëŠ” `DiscountPolicy`ë§Œì„ ì°¸ì¡°í•  ê²ƒì´ê³  `DiscountCondition`ì€ ì „í˜€ ëª¨ë¥´ëŠ” ì¡´ì¬ê°€ ë  ê²ƒì´ë‹¤. ì¦‰, `ReservationService`ëŠ” `DiscountPolicy`ì˜ ë³€ê²½ì—ë§Œ ì˜í–¥ì„ ë§ì„ ê²ƒì´ë‹¤.

ê·¸ëŸ¬ë©´ ì• ì´ˆì— ì²˜ìŒë¶€í„° ì´ë ‡ê²Œ ê³ ë ¤í•˜ì—¬ ì„¤ê³„í•  ìˆ˜ ì—†ì—ˆì„ê¹Œ? ì ˆì°¨ì§€í–¥ì ìœ¼ë¡œëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤. ì™œëƒí•˜ë©´ ì ˆì°¨ì§€í–¥ì  ì„¤ê³„ëŠ” ë°ì´í„°ê°€ ì‚¬ìš©ë  ë¬¸ë§¥ì„ ì „í˜€ ê³ ë ¤í•˜ì§€ ì•Šê³  ì„¤ê³„ë¥¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ì •ë§ ì œëŒ€ë¡œ ê°ì²´ì§€í–¥ì ìœ¼ë¡œ ì„¤ê³„ë¥¼ í•˜ë ¤ë©´ ê°ì²´ë¥¼ ì„¤ê³„í•˜ê¸° ì „ì— ì´ ê°ì²´ê°€ ì–´ë””ì„œ ì“°ì¼ì§€ì— ëŒ€í•œ ë¬¸ë§¥ì´ í•„ìš”í•˜ë‹¤. ì´ê²ƒì„ ë°”ë¡œ **ì±…ì„ ì£¼ë„ ê°œë°œ**ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

## ì˜ˆì œ. ì ˆì°¨ì—ì„œ ê°ì²´ë¡œ

ì´ì œ ìœ„ì˜ ì´ë¡ ì ì¸ ì´ì•¼ê¸°ë¥¼ ì§ì ‘ í•œë²ˆ ë³€ê²½í•´ë³´ì. ì½”ë“œëŠ” [ê°•ì‚¬ë‹˜ ë ˆíŒŒì§€í† ë¦¬](https://github.com/eternity-oop/object-basic-02-04)ë¥¼ ê³µìœ í•˜ê² ë‹¤.

> ì˜ëª»ëœ ì§€ì‹ì´ ìˆì„ ê²½ìš° ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ê² ìŠµë‹ˆë‹¤!